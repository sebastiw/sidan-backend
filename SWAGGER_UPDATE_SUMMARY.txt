â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              SWAGGER.YAML MANUAL UPDATE - COMPLETE              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ CHANGES MADE:

1. Updated OpenAPI Version & Info
   âœ“ Version: 3.0.1
   âœ“ Title: "Sidan API"
   âœ“ Description: Updated to mention JWT Bearer authentication
   âœ“ Version: 3.0.0

2. Updated Servers
   âœ“ Primary: https://api.chalmerslosers.com (Production)
   âœ“ Removed old servers (localhost, port 30880)

3. Removed All /auth/* Endpoints
   âœ— /auth/{provider}
   âœ— /auth/{provider}/authorized
   âœ— /auth/{provider}/verifyemail
   âœ— /auth/getusersession

4. Updated Endpoint Specifications

   FILES (/file/*):
   âœ“ POST /file/image - Upload image with Bearer auth
   âœ“ GET /file/{filename} - Get static file

   MAIL (/mail):
   âœ“ POST /mail - Send email with Bearer auth

   ENTRIES (/db/entries):
   âœ“ GET /db/entries - List entries (public, with pagination)
   âœ“ POST /db/entries - Create entry (public)
   âœ“ GET /db/entries/{id} - Get entry by ID (public)
   âœ“ PUT /db/entries/{id} - Update entry (requires Bearer auth)
   âœ“ DELETE /db/entries/{id} - Delete entry (requires Bearer auth)

   MEMBERS (/db/members):
   âœ“ GET /db/members - List members (optional auth)
   âœ“ POST /db/members - Create member (requires Bearer auth)
   âœ“ GET /db/members/{id} - Get member by ID (optional auth)
   âœ“ PUT /db/members/{id} - Update member (requires Bearer auth)
   âœ“ DELETE /db/members/{id} - Delete member (requires Bearer auth)

5. Updated Security Schemes
   âœ“ Replaced OAuth2 schemes with BearerAuth
   âœ“ Type: http, scheme: bearer, bearerFormat: JWT
   âœ“ Description references OAuth2 login flow

6. Updated Data Models
   âœ“ Entry - Fixed field types, added nullable fields
   âœ“ SideKick - Fixed id field type
   âœ“ Member - Fixed number field (int64), added nullable fields
   âœ“ FileDescriptor - Kept as is
   âœ“ MailDescriptor - Kept as is
   âœ— Removed Prospect schema (unused)
   âœ— Removed Provider schema (auth-related)
   âœ— Removed UserSession schema (auth-related)

ğŸ“Š ENDPOINT SUMMARY:

Total Endpoints: 11 (7 paths, some with multiple methods)

Public (no auth):
  â€¢ GET /file/{filename}
  â€¢ GET /db/entries
  â€¢ POST /db/entries
  â€¢ GET /db/entries/{id}
  â€¢ GET /db/members (limited data)
  â€¢ GET /db/members/{id} (limited data)

Protected (Bearer auth required):
  â€¢ POST /file/image (write:image scope)
  â€¢ POST /mail (write:email scope)
  â€¢ PUT /db/entries/{id} (modify:entry scope)
  â€¢ DELETE /db/entries/{id} (modify:entry scope)
  â€¢ POST /db/members (write:member scope)
  â€¢ PUT /db/members/{id} (write:member scope)
  â€¢ DELETE /db/members/{id} (write:member scope)

ğŸ“ TAGS:
  â€¢ files
  â€¢ mail
  â€¢ entries
  â€¢ members

ğŸ” AUTHENTICATION:

Security Scheme: BearerAuth
  Type: HTTP Bearer
  Format: JWT
  Description: JWT Bearer token obtained from OAuth2 flow

Note: Auth endpoints (/auth/login, /auth/callback, etc.) are 
      implemented in the API but excluded from this Swagger spec
      as they are part of the authentication flow itself.

âœ… VALIDATION:

  âœ“ YAML syntax valid
  âœ“ All endpoints match current router.go
  âœ“ All models match current Go structs
  âœ“ Security definitions correct
  âœ“ No auth endpoints included
  âœ“ Primary server: https://api.chalmerslosers.com

ğŸ“ NEXT STEPS:

  1. Import swagger.yaml into editor.swagger.io
  2. Review and test endpoints
  3. Export as needed for documentation
  4. Share with API consumers

